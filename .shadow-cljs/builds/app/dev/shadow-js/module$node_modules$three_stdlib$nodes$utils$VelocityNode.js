["^ ","~:resource-id",["~:shadow.build.npm/resource","node_modules/three-stdlib/nodes/utils/VelocityNode.js"],"~:js","shadow$provide.module$node_modules$three_stdlib$nodes$utils$VelocityNode=function(global,require,module,exports){function VelocityNode(target,params){_Vector3Node.Vector3Node.call(this);this.params={};this.velocity=new _three.Vector3;this.setTarget(target);this.setParams(params)}Object.defineProperty(exports,\"__esModule\",{value:!0});exports.VelocityNode=VelocityNode;var _three=require(\"module$node_modules$three$build$three_module\"),_Vector3Node=require(\"module$node_modules$three_stdlib$nodes$inputs$Vector3Node\");\nVelocityNode.prototype=Object.create(_Vector3Node.Vector3Node.prototype);VelocityNode.prototype.constructor=VelocityNode;VelocityNode.prototype.nodeType=\"Velocity\";VelocityNode.prototype.getReadonly=function(){return!1};VelocityNode.prototype.setParams=function(params){switch(this.params.type){case \"elastic\":delete this.moment,delete this.speed,delete this.springVelocity,delete this.lastVelocity}this.params=params||{};switch(this.params.type){case \"elastic\":this.moment=new _three.Vector3,this.speed=\nnew _three.Vector3,this.springVelocity=new _three.Vector3,this.lastVelocity=new _three.Vector3}};VelocityNode.prototype.setTarget=function(target){this.target&&(delete this.position,delete this.oldPosition);if(this.target=target)this.position=target.getWorldPosition(this.position||new _three.Vector3),this.oldPosition=this.position.clone()};VelocityNode.prototype.updateFrameVelocity=function(){this.target&&(this.position=this.target.getWorldPosition(this.position||new _three.Vector3),this.velocity.subVectors(this.position,\nthis.oldPosition),this.oldPosition.copy(this.position))};VelocityNode.prototype.updateFrame=function(frame){this.updateFrameVelocity(frame);switch(this.params.type){case \"elastic\":frame=frame.delta*(this.params.fps||60);var spring=Math.pow(this.params.spring,frame),damping=Math.pow(this.params.damping,frame);this.velocity.multiplyScalar(Math.exp(-this.params.damping*frame));this.velocity.add(this.springVelocity);this.velocity.add(this.speed.multiplyScalar(damping).multiplyScalar(1-spring));this.speed.subVectors(this.velocity,\nthis.lastVelocity);this.springVelocity.add(this.speed);this.springVelocity.multiplyScalar(spring);this.moment.add(this.springVelocity);this.moment.multiplyScalar(damping);this.lastVelocity.copy(this.velocity);this.value.copy(this.moment);break;default:this.value.copy(this.velocity)}};VelocityNode.prototype.copy=function(source){_Vector3Node.Vector3Node.prototype.copy.call(this,source);source.target&&this.setTarget(source.target);this.setParams(source.params);return this};VelocityNode.prototype.toJSON=\nfunction(meta){meta=_Vector3Node.Vector3Node.prototype.toJSON.call(this,meta);this.target&&(meta.target=this.target.uuid);meta.params=JSON.parse(JSON.stringify(this.params));return meta}}","~:source","shadow$provide[\"module$node_modules$three_stdlib$nodes$utils$VelocityNode\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.VelocityNode = VelocityNode;\n\nvar _three = require(\"three\");\n\nvar _Vector3Node = require(\"../inputs/Vector3Node.js\");\n\nfunction VelocityNode(target, params) {\n  _Vector3Node.Vector3Node.call(this);\n\n  this.params = {};\n  this.velocity = new _three.Vector3();\n  this.setTarget(target);\n  this.setParams(params);\n}\n\nVelocityNode.prototype = Object.create(_Vector3Node.Vector3Node.prototype);\nVelocityNode.prototype.constructor = VelocityNode;\nVelocityNode.prototype.nodeType = 'Velocity';\n\nVelocityNode.prototype.getReadonly = function ()\n/*builder*/\n{\n  return false;\n};\n\nVelocityNode.prototype.setParams = function (params) {\n  switch (this.params.type) {\n    case 'elastic':\n      delete this.moment;\n      delete this.speed;\n      delete this.springVelocity;\n      delete this.lastVelocity;\n      break;\n  }\n\n  this.params = params || {};\n\n  switch (this.params.type) {\n    case 'elastic':\n      this.moment = new _three.Vector3();\n      this.speed = new _three.Vector3();\n      this.springVelocity = new _three.Vector3();\n      this.lastVelocity = new _three.Vector3();\n      break;\n  }\n};\n\nVelocityNode.prototype.setTarget = function (target) {\n  if (this.target) {\n    delete this.position;\n    delete this.oldPosition;\n  }\n\n  this.target = target;\n\n  if (target) {\n    this.position = target.getWorldPosition(this.position || new _three.Vector3());\n    this.oldPosition = this.position.clone();\n  }\n};\n\nVelocityNode.prototype.updateFrameVelocity = function ()\n/*frame*/\n{\n  if (this.target) {\n    this.position = this.target.getWorldPosition(this.position || new _three.Vector3());\n    this.velocity.subVectors(this.position, this.oldPosition);\n    this.oldPosition.copy(this.position);\n  }\n};\n\nVelocityNode.prototype.updateFrame = function (frame) {\n  this.updateFrameVelocity(frame);\n\n  switch (this.params.type) {\n    case 'elastic':\n      // convert to real scale: 0 at 1 values\n      var deltaFps = frame.delta * (this.params.fps || 60);\n      var spring = Math.pow(this.params.spring, deltaFps),\n          damping = Math.pow(this.params.damping, deltaFps); // fix relative frame-rate\n\n      this.velocity.multiplyScalar(Math.exp(-this.params.damping * deltaFps)); // elastic\n\n      this.velocity.add(this.springVelocity);\n      this.velocity.add(this.speed.multiplyScalar(damping).multiplyScalar(1 - spring)); // speed\n\n      this.speed.subVectors(this.velocity, this.lastVelocity); // spring velocity\n\n      this.springVelocity.add(this.speed);\n      this.springVelocity.multiplyScalar(spring); // moment\n\n      this.moment.add(this.springVelocity); // damping\n\n      this.moment.multiplyScalar(damping);\n      this.lastVelocity.copy(this.velocity);\n      this.value.copy(this.moment);\n      break;\n\n    default:\n      this.value.copy(this.velocity);\n  }\n};\n\nVelocityNode.prototype.copy = function (source) {\n  _Vector3Node.Vector3Node.prototype.copy.call(this, source);\n\n  if (source.target) this.setTarget(source.target);\n  this.setParams(source.params);\n  return this;\n};\n\nVelocityNode.prototype.toJSON = function (meta) {\n  var data = _Vector3Node.Vector3Node.prototype.toJSON.call(this, meta);\n\n  if (this.target) data.target = this.target.uuid; // clone params\n\n  data.params = JSON.parse(JSON.stringify(this.params));\n  return data;\n};\n};","~:removed-requires",["~#set",[]],"~:actual-requires",["^5",["~$module$node_modules$three$build$three_module","~$module$node_modules$three_stdlib$nodes$inputs$Vector3Node","~$shadow.js"]],"~:properties",["^5",["VelocityNode","updateFrameVelocity","copy","params","prototype","springVelocity","__esModule","oldPosition","position","moment","nodeType","value","setParams","getReadonly","lastVelocity","target","updateFrame","speed","setTarget","velocity","constructor","toJSON"]],"~:compiled-at",1630917515260,"~:source-map-json","{\n\"version\":3,\n\"file\":\"module$node_modules$three_stdlib$nodes$utils$VelocityNode.js\",\n\"lineCount\":6,\n\"mappings\":\"AAAAA,cAAA,CAAA,yDAAA,CAA8E,QAAQ,CAACC,MAAD,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,OAAvB,CAAgC,CAYtHC,QAASA,aAAY,CAACC,MAAD,CAASC,MAAT,CAAiB,CACpCC,YAAaC,CAAAA,WAAYC,CAAAA,IAAzB,CAA8B,IAA9B,CAEA,KAAKH,CAAAA,MAAL,CAAc,EACd,KAAKI,CAAAA,QAAL,CAAgB,IAAIC,MAAOC,CAAAA,OAC3B,KAAKC,CAAAA,SAAL,CAAeR,MAAf,CACA,KAAKS,CAAAA,SAAL,CAAeR,MAAf,CANoC,CATtCS,MAAOC,CAAAA,cAAP,CAAsBb,OAAtB,CAA+B,YAA/B,CAA6C,CAC3Cc,MAAO,CAAA,CADoC,CAA7C,CAGAd,QAAQC,CAAAA,YAAR,CAAuBA,YAEvB,KAAIO,OAASV,OAAA,CAAQ,8CAAR,CAAb,CAEIM,aAAeN,OAAA,CAAQ,2DAAR,CAWnBG;YAAac,CAAAA,SAAb,CAAyBH,MAAOI,CAAAA,MAAP,CAAcZ,YAAaC,CAAAA,WAAYU,CAAAA,SAAvC,CACzBd,aAAac,CAAAA,SAAUE,CAAAA,WAAvB,CAAqChB,YACrCA,aAAac,CAAAA,SAAUG,CAAAA,QAAvB,CAAkC,UAElCjB,aAAac,CAAAA,SAAUI,CAAAA,WAAvB,CAAqCC,QAAS,EAE9C,CACE,MAAO,CAAA,CADT,CAIAnB,aAAac,CAAAA,SAAUJ,CAAAA,SAAvB,CAAmCU,QAAS,CAAClB,MAAD,CAAS,CACnD,OAAQ,IAAKA,CAAAA,MAAOmB,CAAAA,IAApB,EACE,KAAK,SAAL,CACE,OAAO,IAAKC,CAAAA,MAGZ,CAFA,OAAO,IAAKC,CAAAA,KAEZ,CADA,OAAO,IAAKC,CAAAA,cACZ,CAAA,OAAO,IAAKC,CAAAA,YALhB,CASA,IAAKvB,CAAAA,MAAL,CAAcA,MAAd,EAAwB,EAExB,QAAQ,IAAKA,CAAAA,MAAOmB,CAAAA,IAApB,EACE,KAAK,SAAL,CACE,IAAKC,CAAAA,MAGL,CAHc,IAAIf,MAAOC,CAAAA,OAGzB,CAFA,IAAKe,CAAAA,KAEL;AAFa,IAAIhB,MAAOC,CAAAA,OAExB,CADA,IAAKgB,CAAAA,cACL,CADsB,IAAIjB,MAAOC,CAAAA,OACjC,CAAA,IAAKiB,CAAAA,YAAL,CAAoB,IAAIlB,MAAOC,CAAAA,OALnC,CAZmD,CAsBrDR,aAAac,CAAAA,SAAUL,CAAAA,SAAvB,CAAmCiB,QAAS,CAACzB,MAAD,CAAS,CAC/C,IAAKA,CAAAA,MAAT,GACE,OAAO,IAAK0B,CAAAA,QACZ,CAAA,OAAO,IAAKC,CAAAA,WAFd,CAOA,IAFA,IAAK3B,CAAAA,MAEL,CAFcA,MAEd,CACE,IAAK0B,CAAAA,QACL,CADgB1B,MAAO4B,CAAAA,gBAAP,CAAwB,IAAKF,CAAAA,QAA7B,EAAyC,IAAIpB,MAAOC,CAAAA,OAApD,CAChB,CAAA,IAAKoB,CAAAA,WAAL,CAAmB,IAAKD,CAAAA,QAASG,CAAAA,KAAd,EAV8B,CAcrD9B,aAAac,CAAAA,SAAUiB,CAAAA,mBAAvB,CAA6CC,QAAS,EAEtD,CACM,IAAK/B,CAAAA,MAAT,GACE,IAAK0B,CAAAA,QAEL,CAFgB,IAAK1B,CAAAA,MAAO4B,CAAAA,gBAAZ,CAA6B,IAAKF,CAAAA,QAAlC,EAA8C,IAAIpB,MAAOC,CAAAA,OAAzD,CAEhB,CADA,IAAKF,CAAAA,QAAS2B,CAAAA,UAAd,CAAyB,IAAKN,CAAAA,QAA9B;AAAwC,IAAKC,CAAAA,WAA7C,CACA,CAAA,IAAKA,CAAAA,WAAYM,CAAAA,IAAjB,CAAsB,IAAKP,CAAAA,QAA3B,CAHF,CADF,CAQA3B,aAAac,CAAAA,SAAUqB,CAAAA,WAAvB,CAAqCC,QAAS,CAACC,KAAD,CAAQ,CACpD,IAAKN,CAAAA,mBAAL,CAAyBM,KAAzB,CAEA,QAAQ,IAAKnC,CAAAA,MAAOmB,CAAAA,IAApB,EACE,KAAK,SAAL,CAEMiB,KAAAA,CAAWD,KAAME,CAAAA,KAAjBD,EAA0B,IAAKpC,CAAAA,MAAOsC,CAAAA,GAAtCF,EAA6C,EAA7CA,CAFN,KAGMG,OAASC,IAAKC,CAAAA,GAAL,CAAS,IAAKzC,CAAAA,MAAOuC,CAAAA,MAArB,CAA6BH,KAA7B,CAHf,CAIMM,QAAUF,IAAKC,CAAAA,GAAL,CAAS,IAAKzC,CAAAA,MAAO0C,CAAAA,OAArB,CAA8BN,KAA9B,CAEd,KAAKhC,CAAAA,QAASuC,CAAAA,cAAd,CAA6BH,IAAKI,CAAAA,GAAL,CAAS,CAAC,IAAK5C,CAAAA,MAAO0C,CAAAA,OAAtB,CAAgCN,KAAhC,CAA7B,CAEA,KAAKhC,CAAAA,QAASyC,CAAAA,GAAd,CAAkB,IAAKvB,CAAAA,cAAvB,CACA,KAAKlB,CAAAA,QAASyC,CAAAA,GAAd,CAAkB,IAAKxB,CAAAA,KAAMsB,CAAAA,cAAX,CAA0BD,OAA1B,CAAmCC,CAAAA,cAAnC,CAAkD,CAAlD,CAAsDJ,MAAtD,CAAlB,CAEA,KAAKlB,CAAAA,KAAMU,CAAAA,UAAX,CAAsB,IAAK3B,CAAAA,QAA3B;AAAqC,IAAKmB,CAAAA,YAA1C,CAEA,KAAKD,CAAAA,cAAeuB,CAAAA,GAApB,CAAwB,IAAKxB,CAAAA,KAA7B,CACA,KAAKC,CAAAA,cAAeqB,CAAAA,cAApB,CAAmCJ,MAAnC,CAEA,KAAKnB,CAAAA,MAAOyB,CAAAA,GAAZ,CAAgB,IAAKvB,CAAAA,cAArB,CAEA,KAAKF,CAAAA,MAAOuB,CAAAA,cAAZ,CAA2BD,OAA3B,CACA,KAAKnB,CAAAA,YAAaS,CAAAA,IAAlB,CAAuB,IAAK5B,CAAAA,QAA5B,CACA,KAAKO,CAAAA,KAAMqB,CAAAA,IAAX,CAAgB,IAAKZ,CAAAA,MAArB,CACA,MAEF,SACE,IAAKT,CAAAA,KAAMqB,CAAAA,IAAX,CAAgB,IAAK5B,CAAAA,QAArB,CAzBJ,CAHoD,CAgCtDN,aAAac,CAAAA,SAAUoB,CAAAA,IAAvB,CAA8Bc,QAAS,CAACC,MAAD,CAAS,CAC9C9C,YAAaC,CAAAA,WAAYU,CAAAA,SAAUoB,CAAAA,IAAK7B,CAAAA,IAAxC,CAA6C,IAA7C,CAAmD4C,MAAnD,CAEIA,OAAOhD,CAAAA,MAAX,EAAmB,IAAKQ,CAAAA,SAAL,CAAewC,MAAOhD,CAAAA,MAAtB,CACnB,KAAKS,CAAAA,SAAL,CAAeuC,MAAO/C,CAAAA,MAAtB,CACA,OAAO,KALuC,CAQhDF,aAAac,CAAAA,SAAUoC,CAAAA,MAAvB;AAAgCC,QAAS,CAACC,IAAD,CAAO,CAC1CC,IAAAA,CAAOlD,YAAaC,CAAAA,WAAYU,CAAAA,SAAUoC,CAAAA,MAAO7C,CAAAA,IAA1C,CAA+C,IAA/C,CAAqD+C,IAArD,CAEP,KAAKnD,CAAAA,MAAT,GAAiBoD,IAAKpD,CAAAA,MAAtB,CAA+B,IAAKA,CAAAA,MAAOqD,CAAAA,IAA3C,CAEAD,KAAKnD,CAAAA,MAAL,CAAcqD,IAAKC,CAAAA,KAAL,CAAWD,IAAKE,CAAAA,SAAL,CAAe,IAAKvD,CAAAA,MAApB,CAAX,CACd,OAAOmD,KANuC,CArHsE;\",\n\"sources\":[\"node_modules/three-stdlib/nodes/utils/VelocityNode.js\"],\n\"sourcesContent\":[\"shadow$provide[\\\"module$node_modules$three_stdlib$nodes$utils$VelocityNode\\\"] = function(global,require,module,exports) {\\n\\\"use strict\\\";\\n\\nObject.defineProperty(exports, \\\"__esModule\\\", {\\n  value: true\\n});\\nexports.VelocityNode = VelocityNode;\\n\\nvar _three = require(\\\"three\\\");\\n\\nvar _Vector3Node = require(\\\"../inputs/Vector3Node.js\\\");\\n\\nfunction VelocityNode(target, params) {\\n  _Vector3Node.Vector3Node.call(this);\\n\\n  this.params = {};\\n  this.velocity = new _three.Vector3();\\n  this.setTarget(target);\\n  this.setParams(params);\\n}\\n\\nVelocityNode.prototype = Object.create(_Vector3Node.Vector3Node.prototype);\\nVelocityNode.prototype.constructor = VelocityNode;\\nVelocityNode.prototype.nodeType = 'Velocity';\\n\\nVelocityNode.prototype.getReadonly = function ()\\n/*builder*/\\n{\\n  return false;\\n};\\n\\nVelocityNode.prototype.setParams = function (params) {\\n  switch (this.params.type) {\\n    case 'elastic':\\n      delete this.moment;\\n      delete this.speed;\\n      delete this.springVelocity;\\n      delete this.lastVelocity;\\n      break;\\n  }\\n\\n  this.params = params || {};\\n\\n  switch (this.params.type) {\\n    case 'elastic':\\n      this.moment = new _three.Vector3();\\n      this.speed = new _three.Vector3();\\n      this.springVelocity = new _three.Vector3();\\n      this.lastVelocity = new _three.Vector3();\\n      break;\\n  }\\n};\\n\\nVelocityNode.prototype.setTarget = function (target) {\\n  if (this.target) {\\n    delete this.position;\\n    delete this.oldPosition;\\n  }\\n\\n  this.target = target;\\n\\n  if (target) {\\n    this.position = target.getWorldPosition(this.position || new _three.Vector3());\\n    this.oldPosition = this.position.clone();\\n  }\\n};\\n\\nVelocityNode.prototype.updateFrameVelocity = function ()\\n/*frame*/\\n{\\n  if (this.target) {\\n    this.position = this.target.getWorldPosition(this.position || new _three.Vector3());\\n    this.velocity.subVectors(this.position, this.oldPosition);\\n    this.oldPosition.copy(this.position);\\n  }\\n};\\n\\nVelocityNode.prototype.updateFrame = function (frame) {\\n  this.updateFrameVelocity(frame);\\n\\n  switch (this.params.type) {\\n    case 'elastic':\\n      // convert to real scale: 0 at 1 values\\n      var deltaFps = frame.delta * (this.params.fps || 60);\\n      var spring = Math.pow(this.params.spring, deltaFps),\\n          damping = Math.pow(this.params.damping, deltaFps); // fix relative frame-rate\\n\\n      this.velocity.multiplyScalar(Math.exp(-this.params.damping * deltaFps)); // elastic\\n\\n      this.velocity.add(this.springVelocity);\\n      this.velocity.add(this.speed.multiplyScalar(damping).multiplyScalar(1 - spring)); // speed\\n\\n      this.speed.subVectors(this.velocity, this.lastVelocity); // spring velocity\\n\\n      this.springVelocity.add(this.speed);\\n      this.springVelocity.multiplyScalar(spring); // moment\\n\\n      this.moment.add(this.springVelocity); // damping\\n\\n      this.moment.multiplyScalar(damping);\\n      this.lastVelocity.copy(this.velocity);\\n      this.value.copy(this.moment);\\n      break;\\n\\n    default:\\n      this.value.copy(this.velocity);\\n  }\\n};\\n\\nVelocityNode.prototype.copy = function (source) {\\n  _Vector3Node.Vector3Node.prototype.copy.call(this, source);\\n\\n  if (source.target) this.setTarget(source.target);\\n  this.setParams(source.params);\\n  return this;\\n};\\n\\nVelocityNode.prototype.toJSON = function (meta) {\\n  var data = _Vector3Node.Vector3Node.prototype.toJSON.call(this, meta);\\n\\n  if (this.target) data.target = this.target.uuid; // clone params\\n\\n  data.params = JSON.parse(JSON.stringify(this.params));\\n  return data;\\n};\\n};\"],\n\"names\":[\"shadow$provide\",\"global\",\"require\",\"module\",\"exports\",\"VelocityNode\",\"target\",\"params\",\"_Vector3Node\",\"Vector3Node\",\"call\",\"velocity\",\"_three\",\"Vector3\",\"setTarget\",\"setParams\",\"Object\",\"defineProperty\",\"value\",\"prototype\",\"create\",\"constructor\",\"nodeType\",\"getReadonly\",\"VelocityNode.prototype.getReadonly\",\"VelocityNode.prototype.setParams\",\"type\",\"moment\",\"speed\",\"springVelocity\",\"lastVelocity\",\"VelocityNode.prototype.setTarget\",\"position\",\"oldPosition\",\"getWorldPosition\",\"clone\",\"updateFrameVelocity\",\"VelocityNode.prototype.updateFrameVelocity\",\"subVectors\",\"copy\",\"updateFrame\",\"VelocityNode.prototype.updateFrame\",\"frame\",\"deltaFps\",\"delta\",\"fps\",\"spring\",\"Math\",\"pow\",\"damping\",\"multiplyScalar\",\"exp\",\"add\",\"VelocityNode.prototype.copy\",\"source\",\"toJSON\",\"VelocityNode.prototype.toJSON\",\"meta\",\"data\",\"uuid\",\"JSON\",\"parse\",\"stringify\"]\n}\n"]