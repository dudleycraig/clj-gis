["^ ","~:resource-id",["~:shadow.build.npm/resource","node_modules/three-stdlib/helpers/LightProbeHelper.js"],"~:js","shadow$provide.module$node_modules$three_stdlib$helpers$LightProbeHelper=function(global,require,module,exports){function _typeof(obj$jscomp$0){_typeof=\"function\"===typeof Symbol&&\"symbol\"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&\"function\"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj};return _typeof(obj$jscomp$0)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=\ndescriptor.enumerable||!1;descriptor.configurable=!0;\"value\"in descriptor&&(descriptor.writable=!0);Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){protoProps&&_defineProperties(Constructor.prototype,protoProps);staticProps&&_defineProperties(Constructor,staticProps);return Constructor}function _getPrototypeOf(o$jscomp$0){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)};\nreturn _getPrototypeOf(o$jscomp$0)}function _inherits(subClass,superClass){if(\"function\"!==typeof superClass&&null!==superClass)throw new TypeError(\"Super expression must either be null or a function\");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}});superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o$jscomp$0,p$jscomp$0){_setPrototypeOf=Object.setPrototypeOf||function(o,p){o.__proto__=p;return o};\nreturn _setPrototypeOf(o$jscomp$0,p$jscomp$0)}Object.defineProperty(exports,\"__esModule\",{value:!0});exports.LightProbeHelper=void 0;var _three=require(\"module$node_modules$three$build$three_module\");global=function(_Mesh){function LightProbeHelper(lightProbe,size){if(!(this instanceof LightProbeHelper))throw new TypeError(\"Cannot call a class as a function\");_this.lightProbe=lightProbe;_this.size=size;lightProbe=new _three.ShaderMaterial({type:\"LightProbeHelperMaterial\",uniforms:{sh:{value:_this.lightProbe.sh.coefficients},\nintensity:{value:_this.lightProbe.intensity}},vertexShader:\"varying vec3 vNormal;\\nvoid main() {\\n\\tvNormal \\x3d normalize( normalMatrix * normal );\\n\\tgl_Position \\x3d projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}\",fragmentShader:\"#define RECIPROCAL_PI 0.318309886\\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\\n\\t// matrix is assumed to be orthogonal\\n\\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\\n}\\n// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf\\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\\n\\t// normal is assumed to have unit length\\n\\tfloat x \\x3d normal.x, y \\x3d normal.y, z \\x3d normal.z;\\n\\t// band 0\\n\\tvec3 result \\x3d shCoefficients[ 0 ] * 0.886227;\\n\\t// band 1\\n\\tresult +\\x3d shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\\n\\tresult +\\x3d shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\\n\\tresult +\\x3d shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\\n\\t// band 2\\n\\tresult +\\x3d shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\\n\\tresult +\\x3d shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\\n\\tresult +\\x3d shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\\n\\tresult +\\x3d shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\\n\\tresult +\\x3d shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\\n\\treturn result;\\n}\\nuniform vec3 sh[ 9 ]; // sh coefficients\\nuniform float intensity; // light probe intensity\\nvarying vec3 vNormal;\\nvoid main() {\\n\\tvec3 normal \\x3d normalize( vNormal );\\n\\tvec3 worldNormal \\x3d inverseTransformDirection( normal, viewMatrix );\\n\\tvec3 irradiance \\x3d shGetIrradianceAt( worldNormal, sh );\\n\\tvec3 outgoingLight \\x3d RECIPROCAL_PI * irradiance * intensity;\\n\\tgl_FragColor \\x3d linearToOutputTexel( vec4( outgoingLight, 1.0 ) );\\n}\"});\nsize=new _three.SphereGeometry(1,32,16);lightProbe=_getPrototypeOf(LightProbeHelper).call(this,size,lightProbe);if(!lightProbe||\"object\"!==_typeof(lightProbe)&&\"function\"!==typeof lightProbe){if(void 0===this)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");lightProbe=this}var _this=lightProbe;_this.type=\"LightProbeHelper\";_this.onBeforeRender();return _this}_inherits(LightProbeHelper,_Mesh);_createClass(LightProbeHelper,[{key:\"dispose\",value:function(){this.geometry.dispose();\nthis.material.dispose()}},{key:\"onBeforeRender\",value:function(){this.position.copy(this.lightProbe.position);this.scale.set(1,1,1).multiplyScalar(this.size);this.material.uniforms.intensity.value=this.lightProbe.intensity}}]);return LightProbeHelper}(_three.Mesh);exports.LightProbeHelper=global}","~:source","shadow$provide[\"module$node_modules$three_stdlib$helpers$LightProbeHelper\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LightProbeHelper = void 0;\n\nvar _three = require(\"three\");\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar LightProbeHelper =\n/*#__PURE__*/\nfunction (_Mesh) {\n  _inherits(LightProbeHelper, _Mesh);\n\n  function LightProbeHelper(lightProbe, size) {\n    var _this;\n\n    _classCallCheck(this, LightProbeHelper);\n\n    _this.lightProbe = lightProbe;\n    _this.size = size;\n    var material = new _three.ShaderMaterial({\n      type: 'LightProbeHelperMaterial',\n      uniforms: {\n        sh: {\n          value: _this.lightProbe.sh.coefficients\n        },\n        // by reference\n        intensity: {\n          value: _this.lightProbe.intensity\n        }\n      },\n      vertexShader: ['varying vec3 vNormal;', 'void main() {', '\tvNormal = normalize( normalMatrix * normal );', '\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );', '}'].join('\\n'),\n      fragmentShader: ['#define RECIPROCAL_PI 0.318309886', 'vec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {', '\t// matrix is assumed to be orthogonal', '\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );', '}', '// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf', 'vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {', '\t// normal is assumed to have unit length', '\tfloat x = normal.x, y = normal.y, z = normal.z;', '\t// band 0', '\tvec3 result = shCoefficients[ 0 ] * 0.886227;', '\t// band 1', '\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;', '\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;', '\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;', '\t// band 2', '\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;', '\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;', '\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );', '\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;', '\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );', '\treturn result;', '}', 'uniform vec3 sh[ 9 ]; // sh coefficients', 'uniform float intensity; // light probe intensity', 'varying vec3 vNormal;', 'void main() {', '\tvec3 normal = normalize( vNormal );', '\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );', '\tvec3 irradiance = shGetIrradianceAt( worldNormal, sh );', '\tvec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;', '\tgl_FragColor = linearToOutputTexel( vec4( outgoingLight, 1.0 ) );', '}'].join('\\n')\n    });\n    var geometry = new _three.SphereGeometry(1, 32, 16);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LightProbeHelper).call(this, geometry, material));\n    _this.type = 'LightProbeHelper';\n\n    _this.onBeforeRender();\n\n    return _this;\n  }\n\n  _createClass(LightProbeHelper, [{\n    key: \"dispose\",\n    value: function dispose() {\n      this.geometry.dispose();\n      this.material.dispose();\n    }\n  }, {\n    key: \"onBeforeRender\",\n    value: function onBeforeRender() {\n      this.position.copy(this.lightProbe.position);\n      this.scale.set(1, 1, 1).multiplyScalar(this.size);\n      this.material.uniforms.intensity.value = this.lightProbe.intensity;\n    }\n  }]);\n\n  return LightProbeHelper;\n}(_three.Mesh);\n\nexports.LightProbeHelper = LightProbeHelper;\n};","~:removed-requires",["~#set",[]],"~:actual-requires",["^5",["~$module$node_modules$three$build$three_module","~$shadow.js"]],"~:properties",["^5",["fragmentShader","intensity","lightProbe","prototype","key","__esModule","vertexShader","configurable","value","enumerable","writable","type","__proto__","sh","size","LightProbeHelper","uniforms","constructor"]],"~:compiled-at",1630917515966,"~:source-map-json","{\n\"version\":3,\n\"file\":\"module$node_modules$three_stdlib$helpers$LightProbeHelper.js\",\n\"lineCount\":7,\n\"mappings\":\"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\",\n\"sources\":[\"node_modules/three-stdlib/helpers/LightProbeHelper.js\"],\n\"sourcesContent\":[\"shadow$provide[\\\"module$node_modules$three_stdlib$helpers$LightProbeHelper\\\"] = function(global,require,module,exports) {\\n\\\"use strict\\\";\\n\\nObject.defineProperty(exports, \\\"__esModule\\\", {\\n  value: true\\n});\\nexports.LightProbeHelper = void 0;\\n\\nvar _three = require(\\\"three\\\");\\n\\nfunction _typeof(obj) { if (typeof Symbol === \\\"function\\\" && typeof Symbol.iterator === \\\"symbol\\\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \\\"function\\\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \\\"symbol\\\" : typeof obj; }; } return _typeof(obj); }\\n\\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\\\"Cannot call a class as a function\\\"); } }\\n\\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\\\"value\\\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\\n\\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\\n\\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \\\"object\\\" || typeof call === \\\"function\\\")) { return call; } return _assertThisInitialized(self); }\\n\\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\\\"this hasn't been initialised - super() hasn't been called\\\"); } return self; }\\n\\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\\n\\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \\\"function\\\" && superClass !== null) { throw new TypeError(\\\"Super expression must either be null or a function\\\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\\n\\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\\n\\nvar LightProbeHelper =\\n/*#__PURE__*/\\nfunction (_Mesh) {\\n  _inherits(LightProbeHelper, _Mesh);\\n\\n  function LightProbeHelper(lightProbe, size) {\\n    var _this;\\n\\n    _classCallCheck(this, LightProbeHelper);\\n\\n    _this.lightProbe = lightProbe;\\n    _this.size = size;\\n    var material = new _three.ShaderMaterial({\\n      type: 'LightProbeHelperMaterial',\\n      uniforms: {\\n        sh: {\\n          value: _this.lightProbe.sh.coefficients\\n        },\\n        // by reference\\n        intensity: {\\n          value: _this.lightProbe.intensity\\n        }\\n      },\\n      vertexShader: ['varying vec3 vNormal;', 'void main() {', '\\tvNormal = normalize( normalMatrix * normal );', '\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );', '}'].join('\\\\n'),\\n      fragmentShader: ['#define RECIPROCAL_PI 0.318309886', 'vec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {', '\\t// matrix is assumed to be orthogonal', '\\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );', '}', '// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf', 'vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {', '\\t// normal is assumed to have unit length', '\\tfloat x = normal.x, y = normal.y, z = normal.z;', '\\t// band 0', '\\tvec3 result = shCoefficients[ 0 ] * 0.886227;', '\\t// band 1', '\\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;', '\\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;', '\\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;', '\\t// band 2', '\\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;', '\\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;', '\\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );', '\\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;', '\\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );', '\\treturn result;', '}', 'uniform vec3 sh[ 9 ]; // sh coefficients', 'uniform float intensity; // light probe intensity', 'varying vec3 vNormal;', 'void main() {', '\\tvec3 normal = normalize( vNormal );', '\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );', '\\tvec3 irradiance = shGetIrradianceAt( worldNormal, sh );', '\\tvec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;', '\\tgl_FragColor = linearToOutputTexel( vec4( outgoingLight, 1.0 ) );', '}'].join('\\\\n')\\n    });\\n    var geometry = new _three.SphereGeometry(1, 32, 16);\\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LightProbeHelper).call(this, geometry, material));\\n    _this.type = 'LightProbeHelper';\\n\\n    _this.onBeforeRender();\\n\\n    return _this;\\n  }\\n\\n  _createClass(LightProbeHelper, [{\\n    key: \\\"dispose\\\",\\n    value: function dispose() {\\n      this.geometry.dispose();\\n      this.material.dispose();\\n    }\\n  }, {\\n    key: \\\"onBeforeRender\\\",\\n    value: function onBeforeRender() {\\n      this.position.copy(this.lightProbe.position);\\n      this.scale.set(1, 1, 1).multiplyScalar(this.size);\\n      this.material.uniforms.intensity.value = this.lightProbe.intensity;\\n    }\\n  }]);\\n\\n  return LightProbeHelper;\\n}(_three.Mesh);\\n\\nexports.LightProbeHelper = LightProbeHelper;\\n};\"],\n\"names\":[\"shadow$provide\",\"global\",\"require\",\"module\",\"exports\",\"_typeof\",\"obj\",\"Symbol\",\"iterator\",\"constructor\",\"prototype\",\"_defineProperties\",\"target\",\"props\",\"i\",\"length\",\"descriptor\",\"enumerable\",\"configurable\",\"writable\",\"Object\",\"defineProperty\",\"key\",\"_createClass\",\"Constructor\",\"protoProps\",\"staticProps\",\"_getPrototypeOf\",\"o\",\"setPrototypeOf\",\"getPrototypeOf\",\"__proto__\",\"_inherits\",\"subClass\",\"superClass\",\"TypeError\",\"create\",\"value\",\"_setPrototypeOf\",\"p\",\"LightProbeHelper\",\"_three\",\"_Mesh\",\"lightProbe\",\"size\",\"instance\",\"_this\",\"material\",\"ShaderMaterial\",\"type\",\"uniforms\",\"sh\",\"coefficients\",\"intensity\",\"vertexShader\",\"fragmentShader\",\"geometry\",\"SphereGeometry\",\"call\",\"self\",\"ReferenceError\",\"onBeforeRender\",\"dispose\",\"position\",\"copy\",\"scale\",\"set\",\"multiplyScalar\",\"Mesh\"]\n}\n"]