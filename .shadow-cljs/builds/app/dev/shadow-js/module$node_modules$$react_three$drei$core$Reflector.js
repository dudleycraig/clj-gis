["^ ","~:resource-id",["~:shadow.build.npm/resource","node_modules/@react-three/drei/core/Reflector.js"],"~:js","shadow$provide.module$node_modules$$react_three$drei$core$Reflector=function(global,require,module,exports){function _typeof(obj$jscomp$0){_typeof=\"function\"===typeof Symbol&&\"symbol\"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&\"function\"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj};return _typeof(obj$jscomp$0)}function _getRequireWildcardCache(){if(\"function\"!==typeof WeakMap)return null;var cache=new WeakMap;_getRequireWildcardCache=\nfunction(){return cache};return cache}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{\"default\":obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=\nnull!=arguments[i]?arguments[i]:{};i%2?ownKeys(source,!0).forEach(function(key){var value=source[key];key in target?Object.defineProperty(target,key,{value,enumerable:!0,configurable:!0,writable:!0}):target[key]=value}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _slicedToArray(arr,i){var JSCompiler_temp=\nArray.isArray(arr)?arr:void 0;if(!JSCompiler_temp)if(Symbol.iterator in Object(arr)||\"[object Arguments]\"===Object.prototype.toString.call(arr)){JSCompiler_temp=[];var _n=!0,_d=!1,_e=void 0;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done)&&(JSCompiler_temp.push(_s.value),!i||JSCompiler_temp.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i[\"return\"])_i[\"return\"]()}finally{if(_d)throw _e;}}}else JSCompiler_temp=void 0;if(!(arr=JSCompiler_temp))throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\nreturn arr}function _objectWithoutProperties(source,excluded){if(null==source)return{};if(null==source)var target={};else{target={};var sourceKeys=Object.keys(source),i;for(i=0;i<sourceKeys.length;i++){var key=sourceKeys[i];0<=excluded.indexOf(key)||(target[key]=source[key])}}if(Object.getOwnPropertySymbols)for(i=Object.getOwnPropertySymbols(source),key=0;key<i.length;key++)sourceKeys=i[key],0<=excluded.indexOf(sourceKeys)||Object.prototype.propertyIsEnumerable.call(source,sourceKeys)&&(target[sourceKeys]=\nsource[sourceKeys]);return target}Object.defineProperty(exports,\"__esModule\",{value:!0});exports.Reflector=void 0;var _extends2=_interopRequireDefault(require(\"module$node_modules$$babel$runtime$helpers$esm$extends\")),React=function(obj){if(obj&&obj.__esModule)return obj;if(null===obj||\"object\"!==_typeof(obj)&&\"function\"!==typeof obj)return{\"default\":obj};var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&\nObject.getOwnPropertyDescriptor,key;for(key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj[\"default\"]=obj;cache&&cache.set(obj,newObj);return newObj}(require(\"module$node_modules$react$index\")),_three=require(\"module$node_modules$three$build$three_module\"),_fiber=require(\"module$node_modules$$react_three$fiber$dist$react_three_fiber_esm\"),\n_reactMergeRefs=_interopRequireDefault(require(\"module$node_modules$react_merge_refs$dist$react_merge_refs_esm\"));global=require(\"module$node_modules$$react_three$drei$materials$MeshReflectorMaterial\");(0,_fiber.extend)({MeshReflectorMaterial:global.MeshReflectorMaterial});global=React.forwardRef(function(_ref,ref){var _ref$mixBlur=_ref.mixBlur,mixBlur=void 0===_ref$mixBlur?0:_ref$mixBlur;_ref$mixBlur=_ref.mixStrength;var mixStrength=void 0===_ref$mixBlur?.5:_ref$mixBlur;_ref$mixBlur=_ref.resolution;\nvar resolution=void 0===_ref$mixBlur?256:_ref$mixBlur;_ref$mixBlur=_ref.args;_ref$mixBlur=void 0===_ref$mixBlur?[1,1]:_ref$mixBlur;var _ref$minDepthThreshol=_ref.minDepthThreshold,minDepthThreshold=void 0===_ref$minDepthThreshol?.9:_ref$minDepthThreshol;_ref$minDepthThreshol=_ref.maxDepthThreshold;var maxDepthThreshold=void 0===_ref$minDepthThreshol?1:_ref$minDepthThreshol;_ref$minDepthThreshol=_ref.depthScale;var depthScale=void 0===_ref$minDepthThreshol?0:_ref$minDepthThreshol;_ref$minDepthThreshol=\n_ref.depthToBlurRatioBias;var depthToBlurRatioBias=void 0===_ref$minDepthThreshol?.25:_ref$minDepthThreshol,mirror=_ref.mirror;_ref$minDepthThreshol=_ref.children;var _ref$debug=_ref.debug,debug=void 0===_ref$debug?0:_ref$debug;_ref$debug=_ref.distortion;var distortion=void 0===_ref$debug?1:_ref$debug,distortionMap=_ref.distortionMap;_ref=_objectWithoutProperties(_ref,\"mixBlur mixStrength resolution args minDepthThreshold maxDepthThreshold depthScale depthToBlurRatioBias mirror children debug distortion distortionMap\".split(\" \"));\nvar gl=(0,_fiber.useThree)(function(_ref2){return _ref2.gl}),camera=(0,_fiber.useThree)(function(_ref3){return _ref3.camera}),scene=(0,_fiber.useThree)(function(_ref4){return _ref4.scene}),meshRef=React.useRef(null);_ref$debug=React.useState(function(){return new _three.Plane});var reflectorPlane=_slicedToArray(_ref$debug,1)[0];_ref$debug=React.useState(function(){return new _three.Vector3});var normal=_slicedToArray(_ref$debug,1)[0];_ref$debug=React.useState(function(){return new _three.Vector3});\nvar reflectorWorldPosition=_slicedToArray(_ref$debug,1)[0];_ref$debug=React.useState(function(){return new _three.Vector3});var cameraWorldPosition=_slicedToArray(_ref$debug,1)[0];_ref$debug=React.useState(function(){return new _three.Matrix4});var rotationMatrix=_slicedToArray(_ref$debug,1)[0];_ref$debug=React.useState(function(){return new _three.Vector3(0,0,-1)});var lookAtPosition=_slicedToArray(_ref$debug,1)[0];_ref$debug=React.useState(function(){return new _three.Vector4});var clipPlane=_slicedToArray(_ref$debug,\n1)[0];_ref$debug=React.useState(function(){return new _three.Vector3});var view=_slicedToArray(_ref$debug,1)[0];_ref$debug=React.useState(function(){return new _three.Vector3});var target=_slicedToArray(_ref$debug,1)[0];_ref$debug=React.useState(function(){return new _three.Vector4});var q=_slicedToArray(_ref$debug,1)[0];_ref$debug=React.useState(function(){return new _three.Matrix4});var textureMatrix=_slicedToArray(_ref$debug,1)[0];_ref$debug=React.useState(function(){return new _three.PerspectiveCamera});\nvar virtualCamera=_slicedToArray(_ref$debug,1)[0];_ref$debug=React.useState(function(){for(var renderTargets=[],pars={minFilter:_three.LinearFilter,magFilter:_three.LinearFilter,format:_three.RGBFormat,encoding:gl.outputEncoding},i=0;8>i;i++){var res=Math.max(8,Math.round(resolution/Math.pow(2,i)));res=new _three.WebGLRenderTarget(res,res,pars);res.texture.generateMipmaps=!1;renderTargets.push(res)}return renderTargets});var renderTargets=_slicedToArray(_ref$debug,1)[0],beforeRender=React.useCallback(function(){reflectorWorldPosition.setFromMatrixPosition(meshRef.current.matrixWorld);\ncameraWorldPosition.setFromMatrixPosition(camera.matrixWorld);rotationMatrix.extractRotation(meshRef.current.matrixWorld);normal.set(0,0,1);normal.applyMatrix4(rotationMatrix);view.subVectors(reflectorWorldPosition,cameraWorldPosition);if(!(0<view.dot(normal))){view.reflect(normal).negate();view.add(reflectorWorldPosition);rotationMatrix.extractRotation(camera.matrixWorld);lookAtPosition.set(0,0,-1);lookAtPosition.applyMatrix4(rotationMatrix);lookAtPosition.add(cameraWorldPosition);target.subVectors(reflectorWorldPosition,\nlookAtPosition);target.reflect(normal).negate();target.add(reflectorWorldPosition);virtualCamera.position.copy(view);virtualCamera.up.set(0,1,0);virtualCamera.up.applyMatrix4(rotationMatrix);virtualCamera.up.reflect(normal);virtualCamera.lookAt(target);virtualCamera.far=camera.far;virtualCamera.updateMatrixWorld();virtualCamera.projectionMatrix.copy(camera.projectionMatrix);textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);textureMatrix.multiply(virtualCamera.projectionMatrix);textureMatrix.multiply(virtualCamera.matrixWorldInverse);\ntextureMatrix.multiply(meshRef.current.matrixWorld);reflectorPlane.setFromNormalAndCoplanarPoint(normal,reflectorWorldPosition);reflectorPlane.applyMatrix4(virtualCamera.matrixWorldInverse);clipPlane.set(reflectorPlane.normal.x,reflectorPlane.normal.y,reflectorPlane.normal.z,reflectorPlane.constant);var projectionMatrix=virtualCamera.projectionMatrix;q.x=(Math.sign(clipPlane.x)+projectionMatrix.elements[8])/projectionMatrix.elements[0];q.y=(Math.sign(clipPlane.y)+projectionMatrix.elements[9])/projectionMatrix.elements[5];\nq.z=-1;q.w=(1+projectionMatrix.elements[10])/projectionMatrix.elements[14];clipPlane.multiplyScalar(2/clipPlane.dot(q));projectionMatrix.elements[2]=clipPlane.x;projectionMatrix.elements[6]=clipPlane.y;projectionMatrix.elements[10]=clipPlane.z+1;projectionMatrix.elements[14]=clipPlane.w}},[camera.far,camera.matrixWorld,camera.projectionMatrix,cameraWorldPosition,clipPlane,lookAtPosition,normal,q,reflectorPlane,reflectorWorldPosition,rotationMatrix,target,textureMatrix,view,virtualCamera]);_ref$debug=\nReact.useMemo(function(){var fbo1=new _three.WebGLRenderTarget(resolution,resolution,{minFilter:_three.LinearFilter,magFilter:_three.LinearFilter,format:_three.RGBFormat,encoding:gl.outputEncoding});0<depthScale&&(fbo1.depthBuffer=!0,fbo1.depthTexture=new _three.DepthTexture(resolution,resolution),fbo1.depthTexture.format=_three.DepthFormat,fbo1.depthTexture.type=_three.UnsignedShortType);var mipmaps=renderTargets.reduce(function(acc,fbo,index){acc[\"u_mipmap_\".concat(index)]=fbo.texture;acc[\"u_mipmap_res_\".concat(index)]=\nnew _three.Vector2(fbo.width,fbo.height);return acc},{});mipmaps=_objectSpread({mirror,textureMatrix,mixBlur,tDiffuse:fbo1.texture,tDepth:fbo1.depthTexture,mixStrength,minDepthThreshold,maxDepthThreshold,depthScale,depthToBlurRatioBias,debug,distortion,distortionMap,\"defines-USE_DEPTH\":0<depthScale?\"\":void 0,\"defines-USE_DISTORTION\":distortionMap?\"\":void 0},mipmaps);return[fbo1,mipmaps]},[gl,textureMatrix,resolution,mirror,mixBlur,mixStrength,minDepthThreshold,maxDepthThreshold,depthScale,depthToBlurRatioBias,\ndebug,distortion,distortionMap,renderTargets]);_ref$debug=_slicedToArray(_ref$debug,2);var fbo1=_ref$debug[0];_ref$debug=_ref$debug[1];(0,_fiber.useFrame)(function(){if(null!=meshRef&&meshRef.current){meshRef.current.visible=!1;var currentXrEnabled=gl.xr.enabled,currentShadowAutoUpdate=gl.shadowMap.autoUpdate;beforeRender();gl.xr.enabled=!1;gl.shadowMap.autoUpdate=!1;gl.setRenderTarget(fbo1);gl.state.buffers.depth.setMask(!0);gl.autoClear||gl.clear();gl.render(scene,virtualCamera);0!==mixBlur&&renderTargets.forEach(function(fbo){gl.setRenderTarget(fbo);\ngl.state.buffers.depth.setMask(!0);gl.render(scene,virtualCamera)});gl.xr.enabled=currentXrEnabled;gl.shadowMap.autoUpdate=currentShadowAutoUpdate;meshRef.current.visible=!0;gl.setRenderTarget(null)}});return React.createElement(\"mesh\",(0,_extends2[\"default\"])({ref:(0,_reactMergeRefs[\"default\"])([meshRef,ref])},_ref),React.createElement(\"planeBufferGeometry\",{args:_ref$mixBlur}),_ref$minDepthThreshol?_ref$minDepthThreshol(\"meshReflectorMaterial\",_ref$debug):React.createElement(\"meshReflectorMaterial\",\n_ref$debug))});exports.Reflector=global}","~:source","shadow$provide[\"module$node_modules$$react_three$drei$core$Reflector\"] = function(global,require,module,exports) {\n\"use strict\";\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Reflector = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/esm/extends\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _three = require(\"three\");\n\nvar _fiber = require(\"@react-three/fiber\");\n\nvar _reactMergeRefs = _interopRequireDefault(require(\"react-merge-refs\"));\n\nvar _MeshReflectorMaterial = require(\"../materials/MeshReflectorMaterial.js\");\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n(0, _fiber.extend)({\n  MeshReflectorMaterial: _MeshReflectorMaterial.MeshReflectorMaterial\n});\nvar MIPMAP_NUM = 8;\nvar Reflector =\n/*#__PURE__*/\nReact.forwardRef(function (_ref, ref) {\n  var _ref$mixBlur = _ref.mixBlur,\n      mixBlur = _ref$mixBlur === void 0 ? 0.0 : _ref$mixBlur,\n      _ref$mixStrength = _ref.mixStrength,\n      mixStrength = _ref$mixStrength === void 0 ? 0.5 : _ref$mixStrength,\n      _ref$resolution = _ref.resolution,\n      resolution = _ref$resolution === void 0 ? 256 : _ref$resolution,\n      _ref$args = _ref.args,\n      args = _ref$args === void 0 ? [1, 1] : _ref$args,\n      _ref$minDepthThreshol = _ref.minDepthThreshold,\n      minDepthThreshold = _ref$minDepthThreshol === void 0 ? 0.9 : _ref$minDepthThreshol,\n      _ref$maxDepthThreshol = _ref.maxDepthThreshold,\n      maxDepthThreshold = _ref$maxDepthThreshol === void 0 ? 1 : _ref$maxDepthThreshol,\n      _ref$depthScale = _ref.depthScale,\n      depthScale = _ref$depthScale === void 0 ? 0 : _ref$depthScale,\n      _ref$depthToBlurRatio = _ref.depthToBlurRatioBias,\n      depthToBlurRatioBias = _ref$depthToBlurRatio === void 0 ? 0.25 : _ref$depthToBlurRatio,\n      mirror = _ref.mirror,\n      children = _ref.children,\n      _ref$debug = _ref.debug,\n      debug = _ref$debug === void 0 ? 0 : _ref$debug,\n      _ref$distortion = _ref.distortion,\n      distortion = _ref$distortion === void 0 ? 1 : _ref$distortion,\n      distortionMap = _ref.distortionMap,\n      props = _objectWithoutProperties(_ref, [\"mixBlur\", \"mixStrength\", \"resolution\", \"args\", \"minDepthThreshold\", \"maxDepthThreshold\", \"depthScale\", \"depthToBlurRatioBias\", \"mirror\", \"children\", \"debug\", \"distortion\", \"distortionMap\"]);\n\n  var gl = (0, _fiber.useThree)(function (_ref2) {\n    var gl = _ref2.gl;\n    return gl;\n  });\n  var camera = (0, _fiber.useThree)(function (_ref3) {\n    var camera = _ref3.camera;\n    return camera;\n  });\n  var scene = (0, _fiber.useThree)(function (_ref4) {\n    var scene = _ref4.scene;\n    return scene;\n  });\n  var meshRef = React.useRef(null);\n\n  var _React$useState = React.useState(function () {\n    return new _three.Plane();\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 1),\n      reflectorPlane = _React$useState2[0];\n\n  var _React$useState3 = React.useState(function () {\n    return new _three.Vector3();\n  }),\n      _React$useState4 = _slicedToArray(_React$useState3, 1),\n      normal = _React$useState4[0];\n\n  var _React$useState5 = React.useState(function () {\n    return new _three.Vector3();\n  }),\n      _React$useState6 = _slicedToArray(_React$useState5, 1),\n      reflectorWorldPosition = _React$useState6[0];\n\n  var _React$useState7 = React.useState(function () {\n    return new _three.Vector3();\n  }),\n      _React$useState8 = _slicedToArray(_React$useState7, 1),\n      cameraWorldPosition = _React$useState8[0];\n\n  var _React$useState9 = React.useState(function () {\n    return new _three.Matrix4();\n  }),\n      _React$useState10 = _slicedToArray(_React$useState9, 1),\n      rotationMatrix = _React$useState10[0];\n\n  var _React$useState11 = React.useState(function () {\n    return new _three.Vector3(0, 0, -1);\n  }),\n      _React$useState12 = _slicedToArray(_React$useState11, 1),\n      lookAtPosition = _React$useState12[0];\n\n  var _React$useState13 = React.useState(function () {\n    return new _three.Vector4();\n  }),\n      _React$useState14 = _slicedToArray(_React$useState13, 1),\n      clipPlane = _React$useState14[0];\n\n  var _React$useState15 = React.useState(function () {\n    return new _three.Vector3();\n  }),\n      _React$useState16 = _slicedToArray(_React$useState15, 1),\n      view = _React$useState16[0];\n\n  var _React$useState17 = React.useState(function () {\n    return new _three.Vector3();\n  }),\n      _React$useState18 = _slicedToArray(_React$useState17, 1),\n      target = _React$useState18[0];\n\n  var _React$useState19 = React.useState(function () {\n    return new _three.Vector4();\n  }),\n      _React$useState20 = _slicedToArray(_React$useState19, 1),\n      q = _React$useState20[0];\n\n  var _React$useState21 = React.useState(function () {\n    return new _three.Matrix4();\n  }),\n      _React$useState22 = _slicedToArray(_React$useState21, 1),\n      textureMatrix = _React$useState22[0];\n\n  var _React$useState23 = React.useState(function () {\n    return new _three.PerspectiveCamera();\n  }),\n      _React$useState24 = _slicedToArray(_React$useState23, 1),\n      virtualCamera = _React$useState24[0];\n\n  var _React$useState25 = React.useState(function () {\n    var renderTargets = [];\n    var pars = {\n      minFilter: _three.LinearFilter,\n      magFilter: _three.LinearFilter,\n      format: _three.RGBFormat,\n      encoding: gl.outputEncoding\n    };\n\n    for (var i = 0; i < MIPMAP_NUM; i++) {\n      var res = Math.max(8, Math.round(resolution / Math.pow(2, i)));\n      var renderTarget = new _three.WebGLRenderTarget(res, res, pars);\n      renderTarget.texture.generateMipmaps = false;\n      renderTargets.push(renderTarget);\n    }\n\n    return renderTargets;\n  }),\n      _React$useState26 = _slicedToArray(_React$useState25, 1),\n      renderTargets = _React$useState26[0];\n\n  var beforeRender = React.useCallback(function () {\n    reflectorWorldPosition.setFromMatrixPosition(meshRef.current.matrixWorld);\n    cameraWorldPosition.setFromMatrixPosition(camera.matrixWorld);\n    rotationMatrix.extractRotation(meshRef.current.matrixWorld);\n    normal.set(0, 0, 1);\n    normal.applyMatrix4(rotationMatrix);\n    view.subVectors(reflectorWorldPosition, cameraWorldPosition); // Avoid rendering when reflector is facing away\n\n    if (view.dot(normal) > 0) return;\n    view.reflect(normal).negate();\n    view.add(reflectorWorldPosition);\n    rotationMatrix.extractRotation(camera.matrixWorld);\n    lookAtPosition.set(0, 0, -1);\n    lookAtPosition.applyMatrix4(rotationMatrix);\n    lookAtPosition.add(cameraWorldPosition);\n    target.subVectors(reflectorWorldPosition, lookAtPosition);\n    target.reflect(normal).negate();\n    target.add(reflectorWorldPosition);\n    virtualCamera.position.copy(view);\n    virtualCamera.up.set(0, 1, 0);\n    virtualCamera.up.applyMatrix4(rotationMatrix);\n    virtualCamera.up.reflect(normal);\n    virtualCamera.lookAt(target);\n    virtualCamera.far = camera.far; // Used in WebGLBackground\n\n    virtualCamera.updateMatrixWorld();\n    virtualCamera.projectionMatrix.copy(camera.projectionMatrix); // Update the texture matrix\n\n    textureMatrix.set(0.5, 0.0, 0.0, 0.5, 0.0, 0.5, 0.0, 0.5, 0.0, 0.0, 0.5, 0.5, 0.0, 0.0, 0.0, 1.0);\n    textureMatrix.multiply(virtualCamera.projectionMatrix);\n    textureMatrix.multiply(virtualCamera.matrixWorldInverse);\n    textureMatrix.multiply(meshRef.current.matrixWorld); // Now update projection matrix with new clip plane, implementing code from: http://www.terathon.com/code/oblique.html\n    // Paper explaining this technique: http://www.terathon.com/lengyel/Lengyel-Oblique.pdf\n\n    reflectorPlane.setFromNormalAndCoplanarPoint(normal, reflectorWorldPosition);\n    reflectorPlane.applyMatrix4(virtualCamera.matrixWorldInverse);\n    clipPlane.set(reflectorPlane.normal.x, reflectorPlane.normal.y, reflectorPlane.normal.z, reflectorPlane.constant);\n    var projectionMatrix = virtualCamera.projectionMatrix;\n    q.x = (Math.sign(clipPlane.x) + projectionMatrix.elements[8]) / projectionMatrix.elements[0];\n    q.y = (Math.sign(clipPlane.y) + projectionMatrix.elements[9]) / projectionMatrix.elements[5];\n    q.z = -1.0;\n    q.w = (1.0 + projectionMatrix.elements[10]) / projectionMatrix.elements[14]; // Calculate the scaled plane vector\n\n    clipPlane.multiplyScalar(2.0 / clipPlane.dot(q)); // Replacing the third row of the projection matrix\n\n    projectionMatrix.elements[2] = clipPlane.x;\n    projectionMatrix.elements[6] = clipPlane.y;\n    projectionMatrix.elements[10] = clipPlane.z + 1.0;\n    projectionMatrix.elements[14] = clipPlane.w;\n  }, [camera.far, camera.matrixWorld, camera.projectionMatrix, cameraWorldPosition, clipPlane, lookAtPosition, normal, q, reflectorPlane, reflectorWorldPosition, rotationMatrix, target, textureMatrix, view, virtualCamera]);\n\n  var _React$useMemo = React.useMemo(function () {\n    var parameters = {\n      minFilter: _three.LinearFilter,\n      magFilter: _three.LinearFilter,\n      format: _three.RGBFormat,\n      encoding: gl.outputEncoding\n    };\n    var fbo1 = new _three.WebGLRenderTarget(resolution, resolution, parameters);\n\n    if (depthScale > 0) {\n      fbo1.depthBuffer = true;\n      fbo1.depthTexture = new _three.DepthTexture(resolution, resolution);\n      fbo1.depthTexture.format = _three.DepthFormat;\n      fbo1.depthTexture.type = _three.UnsignedShortType;\n    }\n\n    var mipmaps = renderTargets.reduce(function (acc, fbo, index) {\n      acc[\"u_mipmap_\".concat(index)] = fbo.texture;\n      acc[\"u_mipmap_res_\".concat(index)] = new _three.Vector2(fbo.width, fbo.height);\n      return acc;\n    }, {});\n\n    var reflectorProps = _objectSpread({\n      mirror: mirror,\n      textureMatrix: textureMatrix,\n      mixBlur: mixBlur,\n      tDiffuse: fbo1.texture,\n      tDepth: fbo1.depthTexture,\n      mixStrength: mixStrength,\n      minDepthThreshold: minDepthThreshold,\n      maxDepthThreshold: maxDepthThreshold,\n      depthScale: depthScale,\n      depthToBlurRatioBias: depthToBlurRatioBias,\n      debug: debug,\n      distortion: distortion,\n      distortionMap: distortionMap,\n      'defines-USE_DEPTH': depthScale > 0 ? '' : undefined,\n      'defines-USE_DISTORTION': distortionMap ? '' : undefined\n    }, mipmaps);\n\n    return [fbo1, reflectorProps];\n  }, [gl, textureMatrix, resolution, mirror, mixBlur, mixStrength, minDepthThreshold, maxDepthThreshold, depthScale, depthToBlurRatioBias, debug, distortion, distortionMap, renderTargets]),\n      _React$useMemo2 = _slicedToArray(_React$useMemo, 2),\n      fbo1 = _React$useMemo2[0],\n      reflectorProps = _React$useMemo2[1];\n\n  (0, _fiber.useFrame)(function () {\n    if (!(meshRef != null && meshRef.current)) return;\n    meshRef.current.visible = false;\n    var currentXrEnabled = gl.xr.enabled;\n    var currentShadowAutoUpdate = gl.shadowMap.autoUpdate;\n    beforeRender();\n    gl.xr.enabled = false;\n    gl.shadowMap.autoUpdate = false;\n    gl.setRenderTarget(fbo1);\n    gl.state.buffers.depth.setMask(true);\n    if (!gl.autoClear) gl.clear();\n    gl.render(scene, virtualCamera);\n\n    if (mixBlur !== 0) {\n      renderTargets.forEach(function (fbo) {\n        gl.setRenderTarget(fbo);\n        gl.state.buffers.depth.setMask(true);\n        gl.render(scene, virtualCamera);\n      });\n    }\n\n    gl.xr.enabled = currentXrEnabled;\n    gl.shadowMap.autoUpdate = currentShadowAutoUpdate;\n    meshRef.current.visible = true;\n    gl.setRenderTarget(null);\n  });\n  return (\n    /*#__PURE__*/\n    React.createElement(\"mesh\", (0, _extends2[\"default\"])({\n      ref: (0, _reactMergeRefs[\"default\"])([meshRef, ref])\n    }, props),\n    /*#__PURE__*/\n    React.createElement(\"planeBufferGeometry\", {\n      args: args\n    }), children ? children('meshReflectorMaterial', reflectorProps) :\n    /*#__PURE__*/\n    React.createElement(\"meshReflectorMaterial\", reflectorProps))\n  );\n});\nexports.Reflector = Reflector;\n};","~:removed-requires",["~#set",[]],"~:actual-requires",["^5",["~$module$node_modules$three$build$three_module","~$module$node_modules$$react_three$fiber$dist$react_three_fiber_esm","~$module$node_modules$react$index","~$shadow.js","~$module$node_modules$$react_three$drei$materials$MeshReflectorMaterial","~$module$node_modules$$babel$runtime$helpers$esm$extends","~$module$node_modules$react_merge_refs$dist$react_merge_refs_esm"]],"~:properties",["^5",["z","w","depthToBlurRatioBias","textureMatrix","depthBuffer","args","autoUpdate","far","x","__esModule","encoding","enabled","MeshReflectorMaterial","tDiffuse","depthScale","configurable","value","visible","enumerable","tDepth","magFilter","writable","debug","distortion","mirror","type","y","ref","Reflector","mixBlur","generateMipmaps","distortionMap","minDepthThreshold","minFilter","mixStrength","maxDepthThreshold","format","depthTexture"]],"~:compiled-at",1630917516159,"~:source-map-json","{\n\"version\":3,\n\"file\":\"module$node_modules$$react_three$drei$core$Reflector.js\",\n\"lineCount\":23,\n\"mappings\":\"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\",\n\"sources\":[\"node_modules/@react-three/drei/core/Reflector.js\"],\n\"sourcesContent\":[\"shadow$provide[\\\"module$node_modules$$react_three$drei$core$Reflector\\\"] = function(global,require,module,exports) {\\n\\\"use strict\\\";\\n\\nfunction _typeof(obj) { if (typeof Symbol === \\\"function\\\" && typeof Symbol.iterator === \\\"symbol\\\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \\\"function\\\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \\\"symbol\\\" : typeof obj; }; } return _typeof(obj); }\\n\\nObject.defineProperty(exports, \\\"__esModule\\\", {\\n  value: true\\n});\\nexports.Reflector = void 0;\\n\\nvar _extends2 = _interopRequireDefault(require(\\\"@babel/runtime/helpers/esm/extends\\\"));\\n\\nvar React = _interopRequireWildcard(require(\\\"react\\\"));\\n\\nvar _three = require(\\\"three\\\");\\n\\nvar _fiber = require(\\\"@react-three/fiber\\\");\\n\\nvar _reactMergeRefs = _interopRequireDefault(require(\\\"react-merge-refs\\\"));\\n\\nvar _MeshReflectorMaterial = require(\\\"../materials/MeshReflectorMaterial.js\\\");\\n\\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \\\"function\\\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\\n\\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \\\"object\\\" && typeof obj !== \\\"function\\\") { return { \\\"default\\\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\\\"default\\\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\\n\\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \\\"default\\\": obj }; }\\n\\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\\n\\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\\n\\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\\n\\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\\n\\nfunction _nonIterableRest() { throw new TypeError(\\\"Invalid attempt to destructure non-iterable instance\\\"); }\\n\\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \\\"[object Arguments]\\\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\\\"return\\\"] != null) _i[\\\"return\\\"](); } finally { if (_d) throw _e; } } return _arr; }\\n\\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\\n\\n(0, _fiber.extend)({\\n  MeshReflectorMaterial: _MeshReflectorMaterial.MeshReflectorMaterial\\n});\\nvar MIPMAP_NUM = 8;\\nvar Reflector =\\n/*#__PURE__*/\\nReact.forwardRef(function (_ref, ref) {\\n  var _ref$mixBlur = _ref.mixBlur,\\n      mixBlur = _ref$mixBlur === void 0 ? 0.0 : _ref$mixBlur,\\n      _ref$mixStrength = _ref.mixStrength,\\n      mixStrength = _ref$mixStrength === void 0 ? 0.5 : _ref$mixStrength,\\n      _ref$resolution = _ref.resolution,\\n      resolution = _ref$resolution === void 0 ? 256 : _ref$resolution,\\n      _ref$args = _ref.args,\\n      args = _ref$args === void 0 ? [1, 1] : _ref$args,\\n      _ref$minDepthThreshol = _ref.minDepthThreshold,\\n      minDepthThreshold = _ref$minDepthThreshol === void 0 ? 0.9 : _ref$minDepthThreshol,\\n      _ref$maxDepthThreshol = _ref.maxDepthThreshold,\\n      maxDepthThreshold = _ref$maxDepthThreshol === void 0 ? 1 : _ref$maxDepthThreshol,\\n      _ref$depthScale = _ref.depthScale,\\n      depthScale = _ref$depthScale === void 0 ? 0 : _ref$depthScale,\\n      _ref$depthToBlurRatio = _ref.depthToBlurRatioBias,\\n      depthToBlurRatioBias = _ref$depthToBlurRatio === void 0 ? 0.25 : _ref$depthToBlurRatio,\\n      mirror = _ref.mirror,\\n      children = _ref.children,\\n      _ref$debug = _ref.debug,\\n      debug = _ref$debug === void 0 ? 0 : _ref$debug,\\n      _ref$distortion = _ref.distortion,\\n      distortion = _ref$distortion === void 0 ? 1 : _ref$distortion,\\n      distortionMap = _ref.distortionMap,\\n      props = _objectWithoutProperties(_ref, [\\\"mixBlur\\\", \\\"mixStrength\\\", \\\"resolution\\\", \\\"args\\\", \\\"minDepthThreshold\\\", \\\"maxDepthThreshold\\\", \\\"depthScale\\\", \\\"depthToBlurRatioBias\\\", \\\"mirror\\\", \\\"children\\\", \\\"debug\\\", \\\"distortion\\\", \\\"distortionMap\\\"]);\\n\\n  var gl = (0, _fiber.useThree)(function (_ref2) {\\n    var gl = _ref2.gl;\\n    return gl;\\n  });\\n  var camera = (0, _fiber.useThree)(function (_ref3) {\\n    var camera = _ref3.camera;\\n    return camera;\\n  });\\n  var scene = (0, _fiber.useThree)(function (_ref4) {\\n    var scene = _ref4.scene;\\n    return scene;\\n  });\\n  var meshRef = React.useRef(null);\\n\\n  var _React$useState = React.useState(function () {\\n    return new _three.Plane();\\n  }),\\n      _React$useState2 = _slicedToArray(_React$useState, 1),\\n      reflectorPlane = _React$useState2[0];\\n\\n  var _React$useState3 = React.useState(function () {\\n    return new _three.Vector3();\\n  }),\\n      _React$useState4 = _slicedToArray(_React$useState3, 1),\\n      normal = _React$useState4[0];\\n\\n  var _React$useState5 = React.useState(function () {\\n    return new _three.Vector3();\\n  }),\\n      _React$useState6 = _slicedToArray(_React$useState5, 1),\\n      reflectorWorldPosition = _React$useState6[0];\\n\\n  var _React$useState7 = React.useState(function () {\\n    return new _three.Vector3();\\n  }),\\n      _React$useState8 = _slicedToArray(_React$useState7, 1),\\n      cameraWorldPosition = _React$useState8[0];\\n\\n  var _React$useState9 = React.useState(function () {\\n    return new _three.Matrix4();\\n  }),\\n      _React$useState10 = _slicedToArray(_React$useState9, 1),\\n      rotationMatrix = _React$useState10[0];\\n\\n  var _React$useState11 = React.useState(function () {\\n    return new _three.Vector3(0, 0, -1);\\n  }),\\n      _React$useState12 = _slicedToArray(_React$useState11, 1),\\n      lookAtPosition = _React$useState12[0];\\n\\n  var _React$useState13 = React.useState(function () {\\n    return new _three.Vector4();\\n  }),\\n      _React$useState14 = _slicedToArray(_React$useState13, 1),\\n      clipPlane = _React$useState14[0];\\n\\n  var _React$useState15 = React.useState(function () {\\n    return new _three.Vector3();\\n  }),\\n      _React$useState16 = _slicedToArray(_React$useState15, 1),\\n      view = _React$useState16[0];\\n\\n  var _React$useState17 = React.useState(function () {\\n    return new _three.Vector3();\\n  }),\\n      _React$useState18 = _slicedToArray(_React$useState17, 1),\\n      target = _React$useState18[0];\\n\\n  var _React$useState19 = React.useState(function () {\\n    return new _three.Vector4();\\n  }),\\n      _React$useState20 = _slicedToArray(_React$useState19, 1),\\n      q = _React$useState20[0];\\n\\n  var _React$useState21 = React.useState(function () {\\n    return new _three.Matrix4();\\n  }),\\n      _React$useState22 = _slicedToArray(_React$useState21, 1),\\n      textureMatrix = _React$useState22[0];\\n\\n  var _React$useState23 = React.useState(function () {\\n    return new _three.PerspectiveCamera();\\n  }),\\n      _React$useState24 = _slicedToArray(_React$useState23, 1),\\n      virtualCamera = _React$useState24[0];\\n\\n  var _React$useState25 = React.useState(function () {\\n    var renderTargets = [];\\n    var pars = {\\n      minFilter: _three.LinearFilter,\\n      magFilter: _three.LinearFilter,\\n      format: _three.RGBFormat,\\n      encoding: gl.outputEncoding\\n    };\\n\\n    for (var i = 0; i < MIPMAP_NUM; i++) {\\n      var res = Math.max(8, Math.round(resolution / Math.pow(2, i)));\\n      var renderTarget = new _three.WebGLRenderTarget(res, res, pars);\\n      renderTarget.texture.generateMipmaps = false;\\n      renderTargets.push(renderTarget);\\n    }\\n\\n    return renderTargets;\\n  }),\\n      _React$useState26 = _slicedToArray(_React$useState25, 1),\\n      renderTargets = _React$useState26[0];\\n\\n  var beforeRender = React.useCallback(function () {\\n    reflectorWorldPosition.setFromMatrixPosition(meshRef.current.matrixWorld);\\n    cameraWorldPosition.setFromMatrixPosition(camera.matrixWorld);\\n    rotationMatrix.extractRotation(meshRef.current.matrixWorld);\\n    normal.set(0, 0, 1);\\n    normal.applyMatrix4(rotationMatrix);\\n    view.subVectors(reflectorWorldPosition, cameraWorldPosition); // Avoid rendering when reflector is facing away\\n\\n    if (view.dot(normal) > 0) return;\\n    view.reflect(normal).negate();\\n    view.add(reflectorWorldPosition);\\n    rotationMatrix.extractRotation(camera.matrixWorld);\\n    lookAtPosition.set(0, 0, -1);\\n    lookAtPosition.applyMatrix4(rotationMatrix);\\n    lookAtPosition.add(cameraWorldPosition);\\n    target.subVectors(reflectorWorldPosition, lookAtPosition);\\n    target.reflect(normal).negate();\\n    target.add(reflectorWorldPosition);\\n    virtualCamera.position.copy(view);\\n    virtualCamera.up.set(0, 1, 0);\\n    virtualCamera.up.applyMatrix4(rotationMatrix);\\n    virtualCamera.up.reflect(normal);\\n    virtualCamera.lookAt(target);\\n    virtualCamera.far = camera.far; // Used in WebGLBackground\\n\\n    virtualCamera.updateMatrixWorld();\\n    virtualCamera.projectionMatrix.copy(camera.projectionMatrix); // Update the texture matrix\\n\\n    textureMatrix.set(0.5, 0.0, 0.0, 0.5, 0.0, 0.5, 0.0, 0.5, 0.0, 0.0, 0.5, 0.5, 0.0, 0.0, 0.0, 1.0);\\n    textureMatrix.multiply(virtualCamera.projectionMatrix);\\n    textureMatrix.multiply(virtualCamera.matrixWorldInverse);\\n    textureMatrix.multiply(meshRef.current.matrixWorld); // Now update projection matrix with new clip plane, implementing code from: http://www.terathon.com/code/oblique.html\\n    // Paper explaining this technique: http://www.terathon.com/lengyel/Lengyel-Oblique.pdf\\n\\n    reflectorPlane.setFromNormalAndCoplanarPoint(normal, reflectorWorldPosition);\\n    reflectorPlane.applyMatrix4(virtualCamera.matrixWorldInverse);\\n    clipPlane.set(reflectorPlane.normal.x, reflectorPlane.normal.y, reflectorPlane.normal.z, reflectorPlane.constant);\\n    var projectionMatrix = virtualCamera.projectionMatrix;\\n    q.x = (Math.sign(clipPlane.x) + projectionMatrix.elements[8]) / projectionMatrix.elements[0];\\n    q.y = (Math.sign(clipPlane.y) + projectionMatrix.elements[9]) / projectionMatrix.elements[5];\\n    q.z = -1.0;\\n    q.w = (1.0 + projectionMatrix.elements[10]) / projectionMatrix.elements[14]; // Calculate the scaled plane vector\\n\\n    clipPlane.multiplyScalar(2.0 / clipPlane.dot(q)); // Replacing the third row of the projection matrix\\n\\n    projectionMatrix.elements[2] = clipPlane.x;\\n    projectionMatrix.elements[6] = clipPlane.y;\\n    projectionMatrix.elements[10] = clipPlane.z + 1.0;\\n    projectionMatrix.elements[14] = clipPlane.w;\\n  }, [camera.far, camera.matrixWorld, camera.projectionMatrix, cameraWorldPosition, clipPlane, lookAtPosition, normal, q, reflectorPlane, reflectorWorldPosition, rotationMatrix, target, textureMatrix, view, virtualCamera]);\\n\\n  var _React$useMemo = React.useMemo(function () {\\n    var parameters = {\\n      minFilter: _three.LinearFilter,\\n      magFilter: _three.LinearFilter,\\n      format: _three.RGBFormat,\\n      encoding: gl.outputEncoding\\n    };\\n    var fbo1 = new _three.WebGLRenderTarget(resolution, resolution, parameters);\\n\\n    if (depthScale > 0) {\\n      fbo1.depthBuffer = true;\\n      fbo1.depthTexture = new _three.DepthTexture(resolution, resolution);\\n      fbo1.depthTexture.format = _three.DepthFormat;\\n      fbo1.depthTexture.type = _three.UnsignedShortType;\\n    }\\n\\n    var mipmaps = renderTargets.reduce(function (acc, fbo, index) {\\n      acc[\\\"u_mipmap_\\\".concat(index)] = fbo.texture;\\n      acc[\\\"u_mipmap_res_\\\".concat(index)] = new _three.Vector2(fbo.width, fbo.height);\\n      return acc;\\n    }, {});\\n\\n    var reflectorProps = _objectSpread({\\n      mirror: mirror,\\n      textureMatrix: textureMatrix,\\n      mixBlur: mixBlur,\\n      tDiffuse: fbo1.texture,\\n      tDepth: fbo1.depthTexture,\\n      mixStrength: mixStrength,\\n      minDepthThreshold: minDepthThreshold,\\n      maxDepthThreshold: maxDepthThreshold,\\n      depthScale: depthScale,\\n      depthToBlurRatioBias: depthToBlurRatioBias,\\n      debug: debug,\\n      distortion: distortion,\\n      distortionMap: distortionMap,\\n      'defines-USE_DEPTH': depthScale > 0 ? '' : undefined,\\n      'defines-USE_DISTORTION': distortionMap ? '' : undefined\\n    }, mipmaps);\\n\\n    return [fbo1, reflectorProps];\\n  }, [gl, textureMatrix, resolution, mirror, mixBlur, mixStrength, minDepthThreshold, maxDepthThreshold, depthScale, depthToBlurRatioBias, debug, distortion, distortionMap, renderTargets]),\\n      _React$useMemo2 = _slicedToArray(_React$useMemo, 2),\\n      fbo1 = _React$useMemo2[0],\\n      reflectorProps = _React$useMemo2[1];\\n\\n  (0, _fiber.useFrame)(function () {\\n    if (!(meshRef != null && meshRef.current)) return;\\n    meshRef.current.visible = false;\\n    var currentXrEnabled = gl.xr.enabled;\\n    var currentShadowAutoUpdate = gl.shadowMap.autoUpdate;\\n    beforeRender();\\n    gl.xr.enabled = false;\\n    gl.shadowMap.autoUpdate = false;\\n    gl.setRenderTarget(fbo1);\\n    gl.state.buffers.depth.setMask(true);\\n    if (!gl.autoClear) gl.clear();\\n    gl.render(scene, virtualCamera);\\n\\n    if (mixBlur !== 0) {\\n      renderTargets.forEach(function (fbo) {\\n        gl.setRenderTarget(fbo);\\n        gl.state.buffers.depth.setMask(true);\\n        gl.render(scene, virtualCamera);\\n      });\\n    }\\n\\n    gl.xr.enabled = currentXrEnabled;\\n    gl.shadowMap.autoUpdate = currentShadowAutoUpdate;\\n    meshRef.current.visible = true;\\n    gl.setRenderTarget(null);\\n  });\\n  return (\\n    /*#__PURE__*/\\n    React.createElement(\\\"mesh\\\", (0, _extends2[\\\"default\\\"])({\\n      ref: (0, _reactMergeRefs[\\\"default\\\"])([meshRef, ref])\\n    }, props),\\n    /*#__PURE__*/\\n    React.createElement(\\\"planeBufferGeometry\\\", {\\n      args: args\\n    }), children ? children('meshReflectorMaterial', reflectorProps) :\\n    /*#__PURE__*/\\n    React.createElement(\\\"meshReflectorMaterial\\\", reflectorProps))\\n  );\\n});\\nexports.Reflector = Reflector;\\n};\"],\n\"names\":[\"shadow$provide\",\"global\",\"require\",\"module\",\"exports\",\"_typeof\",\"obj\",\"Symbol\",\"iterator\",\"constructor\",\"prototype\",\"_getRequireWildcardCache\",\"WeakMap\",\"cache\",\"_interopRequireDefault\",\"__esModule\",\"ownKeys\",\"object\",\"enumerableOnly\",\"keys\",\"Object\",\"getOwnPropertySymbols\",\"symbols\",\"filter\",\"sym\",\"getOwnPropertyDescriptor\",\"enumerable\",\"push\",\"apply\",\"_objectSpread\",\"target\",\"i\",\"arguments\",\"length\",\"source\",\"forEach\",\"key\",\"defineProperty\",\"value\",\"configurable\",\"writable\",\"getOwnPropertyDescriptors\",\"defineProperties\",\"_slicedToArray\",\"arr\",\"Array\",\"isArray\",\"toString\",\"call\",\"_arr\",\"_n\",\"_d\",\"_e\",\"undefined\",\"_i\",\"_s\",\"done\",\"next\",\"err\",\"TypeError\",\"_objectWithoutProperties\",\"excluded\",\"sourceKeys\",\"indexOf\",\"sourceSymbolKeys\",\"propertyIsEnumerable\",\"Reflector\",\"_extends2\",\"React\",\"_interopRequireWildcard\",\"has\",\"get\",\"newObj\",\"hasPropertyDescriptor\",\"hasOwnProperty\",\"desc\",\"set\",\"_three\",\"_fiber\",\"_reactMergeRefs\",\"_MeshReflectorMaterial\",\"extend\",\"MeshReflectorMaterial\",\"forwardRef\",\"_ref\",\"ref\",\"_ref$mixBlur\",\"mixBlur\",\"_ref$mixStrength\",\"mixStrength\",\"_ref$resolution\",\"resolution\",\"_ref$args\",\"args\",\"_ref$minDepthThreshol\",\"minDepthThreshold\",\"_ref$maxDepthThreshol\",\"maxDepthThreshold\",\"_ref$depthScale\",\"depthScale\",\"_ref$depthToBlurRatio\",\"depthToBlurRatioBias\",\"mirror\",\"children\",\"_ref$debug\",\"debug\",\"_ref$distortion\",\"distortion\",\"distortionMap\",\"props\",\"gl\",\"useThree\",\"_ref2\",\"camera\",\"_ref3\",\"scene\",\"_ref4\",\"meshRef\",\"useRef\",\"_React$useState\",\"useState\",\"Plane\",\"reflectorPlane\",\"_React$useState2\",\"_React$useState3\",\"Vector3\",\"normal\",\"_React$useState4\",\"_React$useState5\",\"reflectorWorldPosition\",\"_React$useState6\",\"_React$useState7\",\"cameraWorldPosition\",\"_React$useState8\",\"_React$useState9\",\"Matrix4\",\"rotationMatrix\",\"_React$useState10\",\"_React$useState11\",\"lookAtPosition\",\"_React$useState12\",\"_React$useState13\",\"Vector4\",\"clipPlane\",\"_React$useState14\",\"_React$useState15\",\"view\",\"_React$useState16\",\"_React$useState17\",\"_React$useState18\",\"_React$useState19\",\"q\",\"_React$useState20\",\"_React$useState21\",\"textureMatrix\",\"_React$useState22\",\"_React$useState23\",\"PerspectiveCamera\",\"virtualCamera\",\"_React$useState24\",\"_React$useState25\",\"renderTargets\",\"pars\",\"minFilter\",\"LinearFilter\",\"magFilter\",\"format\",\"RGBFormat\",\"encoding\",\"outputEncoding\",\"MIPMAP_NUM\",\"res\",\"Math\",\"max\",\"round\",\"pow\",\"renderTarget\",\"WebGLRenderTarget\",\"texture\",\"generateMipmaps\",\"_React$useState26\",\"beforeRender\",\"useCallback\",\"setFromMatrixPosition\",\"current\",\"matrixWorld\",\"extractRotation\",\"applyMatrix4\",\"subVectors\",\"dot\",\"reflect\",\"negate\",\"add\",\"position\",\"copy\",\"up\",\"lookAt\",\"far\",\"updateMatrixWorld\",\"projectionMatrix\",\"multiply\",\"matrixWorldInverse\",\"setFromNormalAndCoplanarPoint\",\"x\",\"y\",\"z\",\"constant\",\"sign\",\"elements\",\"w\",\"multiplyScalar\",\"_React$useMemo\",\"useMemo\",\"fbo1\",\"parameters\",\"depthBuffer\",\"depthTexture\",\"DepthTexture\",\"DepthFormat\",\"type\",\"UnsignedShortType\",\"mipmaps\",\"reduce\",\"acc\",\"fbo\",\"index\",\"concat\",\"Vector2\",\"width\",\"height\",\"reflectorProps\",\"tDiffuse\",\"tDepth\",\"_React$useMemo2\",\"useFrame\",\"visible\",\"currentXrEnabled\",\"xr\",\"enabled\",\"currentShadowAutoUpdate\",\"shadowMap\",\"autoUpdate\",\"setRenderTarget\",\"state\",\"buffers\",\"depth\",\"setMask\",\"autoClear\",\"clear\",\"render\",\"createElement\"]\n}\n"]